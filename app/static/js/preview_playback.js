(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["preview_playback"],{

/***/ "../../src/mvfx_frontend/public/custom_pages_wrap/preview_playback.js":
/*!********************************************************************************!*\
  !*** /opt/mvfx/src/mvfx_frontend/public/custom_pages_wrap/preview_playback.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.PreviewPlayback = PreviewPlayback;\n\nvar _jquery = __webpack_require__(/*! jquery */ \"../../../../node_modules/jquery/dist/jquery.js-exposed\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * CUSTOM PLUGINS PREVIEWS PLAYBACK\n * ===============================\n * Starts/Stops the video on product preview hover. It also shows a loader if video loading takes too long.\n * Used in motionvfx custom plugins pages.\n * \n * WARNING!!!\n * CHANGING THIS CODE WILL AFFECT ALL CUSTOM PLUGIN TEMPLATES ADDED BY MOTIONVFX WORKERS.\n * APPLY CHANGES WITH CARE!!!\n */\n\n/* istanbul ignore next */\n(0, _jquery2.default)(document).ready(function () {\n    PreviewPlayback();\n});\n\nfunction PreviewPlayback() {\n    var spinnerTimeoutId = void 0; // Loader timeout id of the currently hovered video. Stored for cancellation purposes.\n\n    // Video hover event listener.\n    (0, _jquery2.default)('body').on('mouseover', '.preview-wrapper', function (e) {\n        var $previewWrapper = (0, _jquery2.default)(e.currentTarget);\n\n        // Ensure that there in no other video already playing in the container.\n        if ($previewWrapper.find('.product-video').length === 0) {\n            spawnVideo($previewWrapper);\n        }\n    });\n\n    // Video mouse leave event listener.\n    (0, _jquery2.default)('body').on('mouseleave', '.preview-wrapper', function (e) {\n        var $previewWrapper = (0, _jquery2.default)(e.currentTarget);\n\n        // Remove loader or interrupt showing one if not yet showed.\n        clearTimeout(spinnerTimeoutId);\n        $previewWrapper.find('.prev-spinner').remove();\n\n        // Remove the video.\n        $previewWrapper.find('.preview-video-container').hide().removeClass('d-flex');\n        $previewWrapper.find('.product-video').remove();\n    });\n\n    /**\n     * Creates video tag and starts the autoplay.\n     * @param {Object} $previewWrapper - Wrapper element over the whole product preview.\n     */\n    function spawnVideo($previewWrapper) {\n        var mp4Url = $previewWrapper.data('mp4Url');\n\n        // Add the video tag with source url.\n        $previewWrapper.find('.preview-video-container').append('\\n            <video class=\"product-video\" autoplay playsinline loop muted>\\n                <source src=\"' + mp4Url + '\" type=\"video/mp4\">                \\n            </video>\\n        ');\n\n        // Wait at least 1 second before showing video loader.\n        spinnerTimeoutId = setTimeout(function () {\n            $previewWrapper.find('.preview-image-container').append('<div class=\"prev-spinner\">\\n                    <div class=\"spinner\">\\n                        <div class=\"double-bounce1\"></div>\\n                        <div class=\"double-bounce2\"></div>\\n                    </div>\\n                  </div>');\n        }, 1000);\n\n        var $videoEl = (0, _jquery2.default)($previewWrapper.find('video')); // Get just added video element.\n\n        $videoEl.on('canplay', function () {\n            // Set the height of the video to be the same as preview image as sometimes the video can be smaller than the image.            \n            (0, _jquery2.default)('.preview-video-container').css('height', $previewWrapper.find('.preview-image-container').outerHeight() + 'px');\n\n            $previewWrapper.find('.preview-video-container').show().addClass('d-flex'); // Video elements are in place, display it in the UI.\n\n            // Start the playback.\n            $videoEl[0].play().catch(function (e) {\n                // If playback was blocked by the browser (ex. safari blocks autoplay on videos with sound by defualt), mute the video and try again.\n                if (e.name == \"NotAllowedError\") {\n                    $videoEl.prop('muted', true); // Mute the video.\n                    $videoEl[0].play();\n                } else {\n                    return e;\n                }\n            });\n\n            // Remove loader or interrupt showing one if not yet showed.\n            clearTimeout(spinnerTimeoutId);\n            $previewWrapper.find('.prev-spinner').remove();\n        });\n    }\n}\n\n//# sourceURL=webpack:////opt/mvfx/src/mvfx_frontend/public/custom_pages_wrap/preview_playback.js?");

/***/ }),

/***/ "../../src/mvfx_frontend/public/preview_playback/index.js":
/*!********************************************************************!*\
  !*** /opt/mvfx/src/mvfx_frontend/public/preview_playback/index.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! ../custom_pages_wrap/preview_playback.js */ \"../../src/mvfx_frontend/public/custom_pages_wrap/preview_playback.js\");\n\n//# sourceURL=webpack:////opt/mvfx/src/mvfx_frontend/public/preview_playback/index.js?");

/***/ })

},[["../../src/mvfx_frontend/public/preview_playback/index.js","runtime","commons"]]]);